<?php

namespace App\Controllers;
class Articles extends BaseController
{
    /*
     * Home page where you can see a list of autogenerated topics to start browsing.
     */
    public function index(): string
    {
        $topicList = Content::getTopicsArray();
        $page = view('header', ['title' => 'Select a topic as a start point!']);
        $page .= view('topics');
        $page .= view('footer');
        return $page;
    }

    public function fromTopic(string $topic): string
    {
        $articleList = Content::generateFromTopic($topic);
        /*
        $articleList = [
             "Unraveling the Mysteries of Fractal Geometry",
             "The Beauty of Prime Numbers: A Visual Exploration",
             "From Zero to Infinity: A Journey Through Number Theory",
             "The Power of Mathematical Induction: Unlocking Complex Proofs",
             "Exploring the Golden Ratio in Art and Nature",
             "Chaos Theory: Finding Order in Disorder",
             "The Enigma of Riemann Hypothesis: A Deep Dive",
             "Game Theory: Strategies for Success in Life and Business",
             "The Fascinating World of Cryptography: Securing Data with Math",
             "Solving P vs NP: The Greatest Unsolved Problem in Computer Science",
             "The Magic of Symmetry: Patterns in Mathematics and Nature",
             "Diving into Differential Equations: Applications in Science and Engineering",
             "The Infinite Possibilities of Calculus: Beyond Limits and Derivatives",
             "Topology Unraveled: Understanding Shapes and Spaces",
             "The Art of Problem Solving: Techniques for Mathematical Olympiads",
             "Quantum Computing: Bridging Math and Physics for the Future",
             "The Elegance of Group Theory: Transforming Algebraic Structures",
             "Data Science Essentials: Statistical Analysis and Machine Learning",
             "Mathematics of Music: Harmonies and Frequencies",
             "The Curious Case of Collatz Conjecture: A Number Theory Puzzle",
        ];
        */
        $links = Content::generateSlugsFromAnchors($articleList);

        $page = view('header', [ 'topic' => $topic]);
        $page .= view('topic_articles', [ 'articlelist' => $links ]);
        $page .= view('footer');
        return $page;
    }

    public function nextArticle(string $target, string $source): string
    {
        /*
         * TODO: Using the slug passed through get method to get the article title.
         *       Planning in the future to use POST method to get directly the title.
         *       This is only to generate the new article, not the actual title.
         */

        $title = Content::getArticleTitleFromSlug($target);
        $content = Content::generateNextArticle($target, $source);
        $page = view('header', ['target' => $target, 'source' => $source]);
        $page .= view('article', ['target' => $target, 'source' => $source]);
        $page .= view('footer', ['target' => $target, 'source' => $source]);
        return $page;
    }
}